"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[71],{6234:function(e,n,t){t(2791);n.Z=t.p+"static/media/comment.97a16824fea655b383d497c24033fb41.svg"},358:function(e,n,t){t(2791);n.Z=t.p+"static/media/emoji-option.887ccb5be77d849f16ebc0fb55045ff6.svg"},2696:function(e,n,t){t(2791);n.Z=t.p+"static/media/like-active.0cc436ac4721743ff6fcee0f070d6cd9.svg"},8050:function(e,n,t){t(2791);n.Z=t.p+"static/media/like-inactive.c0c49de08f31015e0cede13df7c4713e.svg"},1321:function(e,n,t){t(2791);n.Z=t.p+"static/media/more-options.d5528f97f28918abf075504c942a6ca0.svg"},437:function(e,n,t){t(2791);n.Z=t.p+"static/media/save.78833d92e5453e122de06b8ffbb6ce59.svg"},7723:function(e,n,t){t(2791);n.Z=t.p+"static/media/share.19c4dac8629ccecb5f85fdabe26f9f09.svg"},6039:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var s=t(2791),c=t(2930),r=(0,s.createContext)(null),a=t(3504),o=t(8551),i=t(184),u=function(e){var n=e.username;return(0,i.jsxs)("div",{className:"top-post-menu",children:[(0,i.jsxs)("div",{className:"user-container",children:[(0,i.jsx)(a.rU,{to:"".concat(o.h1).concat(n),children:(0,i.jsx)("img",{src:"".concat(o.cE,"/images/avatars/").concat(n,".jpg"),alt:"".concat(n),className:"post-user-icon"})}),(0,i.jsx)("h5",{children:n})]}),(0,i.jsx)("img",{src:t(1321).Z,alt:""})]})},l=function(e){var n=e.src,t=e.caption;return(0,i.jsx)("img",{src:n,id:"dynamic-image-by-user",alt:t})},d=t(8214),m=t(5861),f=t(885),p=t(9344),x=t(7428),h=function(e){var n=e.docId,c=e.totalLikes,r=e.likedPhoto,a=e.handleFocus,o=(0,s.useContext)(x.Z).user.uid,u=(0,s.useContext)(p.Z),l=u.firebase,h=u.FieldValue,g=(0,s.useState)(r),v=(0,f.Z)(g,2),j=v[0],Z=v[1],I=(0,s.useState)(c),N=(0,f.Z)(I,2),b=N[0],k=N[1],w=function(){var e=(0,m.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z((function(e){return!e})),e.next=3,l.firestore().collection("photos").doc(n).update({likes:j?h.arrayRemove(o):h.arrayUnion(o)});case 3:k((function(e){return j?e-1:e+1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bottom-post-icons",children:[(0,i.jsxs)("div",{className:"bottom-icons-container",children:[j?(0,i.jsx)("img",{src:t(2696).Z,onClick:w,alt:"",id:"actions-btn"}):(0,i.jsx)("img",{src:t(8050).Z,onClick:w,alt:"",id:"actions-btn"}),(0,i.jsx)("img",{src:t(6234).Z,onClick:a,alt:"",id:"actions-btn"}),(0,i.jsx)("img",{src:t(7723).Z,alt:""})]}),(0,i.jsx)("img",{src:t(437).Z,alt:""})]}),(0,i.jsx)("div",{className:"likes-session",children:(0,i.jsx)("h5",{children:"".concat(b,1===b?" like":" likes")})})]})},g=function(e){var n=e.caption,t=e.username;return(0,i.jsxs)("div",{className:"post-caption",children:[(0,i.jsx)("h5",{children:t}),(0,i.jsx)("span",{children:n})]})},v=t(8125),j=t(2982),Z=function(e){var n=e.docId,c=e.comments,r=e.setComments,a=e.commentInput,o=(0,s.useState)(""),u=(0,f.Z)(o,2),l=u[0],d=u[1],m=(0,s.useContext)(p.Z),h=m.firebase,g=m.FieldValue,v=(0,s.useContext)(x.Z).user.displayName,Z=function(e){return e.preventDefault(),r([].concat((0,j.Z)(c),[{displayName:v,comment:l}])),d(""),h.firestore().collection("photos").doc(n).update({comments:g.arrayUnion({displayName:v,comment:l})})};return(0,i.jsxs)("form",{className:"post-add-comment",method:"POST",onSubmit:function(e){return l.length>=1?Z(e):e.preventDefault},children:[(0,i.jsx)("img",{src:t(358).Z,alt:""}),(0,i.jsx)("input",{type:"text",name:"add-comment",placeholder:"Add a comment...",autoComplete:"off",value:l,onChange:function(e){var n=e.target;return d(n.value)},ref:a}),(0,i.jsx)("button",{type:"button",disabled:l.length<1,onClick:Z,children:"Post"})]})},I=function(e){var n=e.docId,t=e.comments,c=e.posted,r=e.commentInput,o=(0,s.useState)(t),u=(0,f.Z)(o,2),l=u[0],d=u[1],m=(0,s.useState)(3),p=(0,f.Z)(m,2),x=p[0],h=p[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"post-comments",children:[l.slice(0,x).map((function(e){return(0,i.jsxs)("p",{children:[(0,i.jsx)(a.rU,{to:"/".concat(e.displayName),children:(0,i.jsx)("span",{className:"post-comments-user",children:e.displayName})}),(0,i.jsx)("span",{children:e.comment})]},"".concat(e.comment,"-").concat(e.displayName))})),l.length>=3&&x<l.length&&(0,i.jsx)("p",{className:"comments-view-more",onClick:function(){h(x+3)},children:"View more comments"}),(0,i.jsxs)("p",{children:[(0,v.Z)(c,new Date)," ago"]})]}),(0,i.jsx)(Z,{docId:n,comments:l,setComments:d,commentInput:r})]})},N=function(e){var n=e.content,t=(0,s.useRef)(null);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"post-container",children:[(0,i.jsx)(u,{username:n.username}),(0,i.jsx)(l,{src:"".concat(o.cE).concat(n.imageSrc),caption:n.caption}),(0,i.jsx)(h,{docId:n.docId,totalLikes:n.likes.length,likedPhoto:n.userLikedPhoto,handleFocus:function(){return t.current.focus()}}),(0,i.jsx)(g,{caption:n.caption,username:n.username}),(0,i.jsx)(I,{docId:n.docId,comments:n.comments,posted:n.dateCreated,commentInput:t})]})})},b=t(4973),k=function(e){var n=(0,s.useState)(null),t=(0,f.Z)(n,2),c=t[0],r=t[1];return(0,s.useEffect)((function(){var n=function(){var n=(0,m.Z)((0,d.Z)().mark((function n(){var t,s;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===e||void 0===e||null===(t=e.following)||void 0===t?void 0:t.length)>0)){n.next=6;break}return n.next=3,(0,b.wP)(e.userId,e.following);case 3:(s=n.sent).sort((function(e,n){return n.dateCreated-e.dateCreated})),r(s);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[null===e||void 0===e?void 0:e.userId,null===e||void 0===e?void 0:e.following]),{photos:c}},w=function(){var e=(0,s.useContext)(r).user,n=k(e).photos;return(0,i.jsx)("section",{className:"post-wrapper",children:n?n.map((function(e){return(0,i.jsx)(N,{content:e},e.docId)})):null})},C=t(1019),y=function(e){var n=e.username,t=e.fullName;return n&&t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"user-suggestion-wrapper",children:(0,i.jsxs)("div",{className:"user-suggestion-container",children:[(0,i.jsx)(a.rU,{to:"".concat(o.h1).concat(n),children:(0,i.jsx)("img",{src:"".concat(o.cE,"/images/avatars/").concat(n,".jpg"),className:"suggestions-main-user-icon",alt:n,onError:function(e){e.target.src="".concat(o.cE).concat(C.h)}})}),(0,i.jsxs)("div",{className:"username-container",children:[(0,i.jsx)("h5",{children:n}),(0,i.jsx)("h5",{children:t})]})]})})}):(0,i.jsx)(i.Fragment,{})},F=function(e){var n=e.profileDocId,t=e.username,c=e.profileId,r=e.userId,u=e.loggenInUserDocId,l=(0,s.useState)(!1),p=(0,f.Z)(l,2),x=p[0],h=p[1],g=function(){var e=(0,m.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,(0,b.NS)(u,c,!1);case 3:return e.next=5,(0,b.T6)(n,r,!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x?null:(0,i.jsxs)("div",{className:"user-suggestion-wrapper",children:[(0,i.jsxs)("div",{className:"user-suggestion-container",children:[(0,i.jsx)(a.rU,{to:"".concat(o.h1).concat(t),children:(0,i.jsx)("img",{src:"".concat(o.cE,"/images/avatars/").concat(t,".jpg"),className:"suggestions-icon",alt:t,onError:function(e){e.target.src="".concat(o.cE).concat(C.h)}})}),(0,i.jsx)("div",{className:"username-container",children:(0,i.jsx)("h5",{children:t})})]}),(0,i.jsx)("div",{className:"user-suggestion-button",children:(0,i.jsx)("button",{type:"button",id:"follow-button",onClick:g,children:"Follow"})})]})},S=function(e){var n=e.userId,t=e.following,c=e.loggenInUserDocId,r=(0,s.useState)(null),a=(0,f.Z)(r,2),o=a[0],u=a[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,m.Z)((0,d.Z)().mark((function e(){var s;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.ve)(n,t);case 2:s=e.sent,u(s);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e()}),[n,t]),o?o.length>0?(0,i.jsx)(i.Fragment,{children:o.map((function(e){return(0,i.jsx)(F,{profileDocId:e.docId,username:e.username,profileId:e.userId,userId:n,loggenInUserDocId:c},e.docId)}))}):null:(0,i.jsx)(i.Fragment,{})},U=function(){var e=(0,s.useContext)(r).user,n=(e=void 0===e?{}:e).docId,t=void 0===n?"":n,c=e.fullName,a=e.username,o=e.userId,u=e.following;return(0,i.jsxs)("section",{className:"suggestions-container",children:[(0,i.jsx)(y,{username:a,fullName:c}),(0,i.jsx)(S,{userId:o,following:u,loggenInUserDocId:t})]})},E=t(8592),D=function(e){var n=e.user,t=(0,E.Z)(n.uid),a=t.user,o=t.setActiveUser;return(0,s.useEffect)((function(){document.title="Instagram"}),[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.Provider,{value:{user:a,setActiveUser:o},children:[(0,i.jsx)(c.Z,{}),(0,i.jsxs)("div",{className:"dashboard-wrapper",children:[(0,i.jsx)(w,{}),(0,i.jsx)(U,{})]})]})})}}}]);
//# sourceMappingURL=71.c292ab8f.chunk.js.map