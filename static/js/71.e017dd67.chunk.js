"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[71],{6234:function(e,n,t){t(2791);n.Z=t.p+"static/media/comment.97a16824fea655b383d497c24033fb41.svg"},358:function(e,n,t){t(2791);n.Z=t.p+"static/media/emoji-option.887ccb5be77d849f16ebc0fb55045ff6.svg"},2696:function(e,n,t){t(2791);n.Z=t.p+"static/media/like-active.0cc436ac4721743ff6fcee0f070d6cd9.svg"},8050:function(e,n,t){t(2791);n.Z=t.p+"static/media/like-inactive.c0c49de08f31015e0cede13df7c4713e.svg"},1321:function(e,n,t){t(2791);n.Z=t.p+"static/media/more-options.d5528f97f28918abf075504c942a6ca0.svg"},437:function(e,n,t){t(2791);n.Z=t.p+"static/media/save.78833d92e5453e122de06b8ffbb6ce59.svg"},7723:function(e,n,t){t(2791);n.Z=t.p+"static/media/share.19c4dac8629ccecb5f85fdabe26f9f09.svg"},6039:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var s=t(2791),r=t(2930),c=(0,s.createContext)(null),a=t(3504),o=t(184),i=function(e){var n=e.username;return(0,o.jsxs)("div",{className:"top-post-menu",children:[(0,o.jsxs)("div",{className:"user-container",children:[(0,o.jsx)(a.rU,{to:"/".concat(n),children:(0,o.jsx)("img",{src:"/images/avatars/".concat(n,".jpg"),alt:"".concat(n),className:"post-user-icon"})}),(0,o.jsx)("h5",{children:n})]}),(0,o.jsx)("img",{src:t(1321).Z,alt:""})]})},u=function(e){var n=e.src,t=e.caption;return(0,o.jsx)("img",{src:n,id:"dynamic-image-by-user",alt:t})},l=t(8214),d=t(5861),m=t(885),f=t(9344),p=t(7428),x=function(e){var n=e.docId,r=e.totalLikes,c=e.likedPhoto,a=e.handleFocus,i=(0,s.useContext)(p.Z).user.uid,u=(0,s.useContext)(f.Z),x=u.firebase,h=u.FieldValue,g=(0,s.useState)(c),v=(0,m.Z)(g,2),j=v[0],Z=v[1],I=(0,s.useState)(r),N=(0,m.Z)(I,2),b=N[0],k=N[1],w=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z((function(e){return!e})),e.next=3,x.firestore().collection("photos").doc(n).update({likes:j?h.arrayRemove(i):h.arrayUnion(i)});case 3:k((function(e){return j?e-1:e+1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"bottom-post-icons",children:[(0,o.jsxs)("div",{className:"bottom-icons-container",children:[j?(0,o.jsx)("img",{src:t(2696).Z,onClick:w,alt:"",id:"actions-btn"}):(0,o.jsx)("img",{src:t(8050).Z,onClick:w,alt:"",id:"actions-btn"}),(0,o.jsx)("img",{src:t(6234).Z,onClick:a,alt:"",id:"actions-btn"}),(0,o.jsx)("img",{src:t(7723).Z,alt:""})]}),(0,o.jsx)("img",{src:t(437).Z,alt:""})]}),(0,o.jsx)("div",{className:"likes-session",children:(0,o.jsx)("h5",{children:"".concat(b,1===b?" like":" likes")})})]})},h=function(e){var n=e.caption,t=e.username;return(0,o.jsxs)("div",{className:"post-caption",children:[(0,o.jsx)("h5",{children:t}),(0,o.jsx)("span",{children:n})]})},g=t(8125),v=t(2982),j=function(e){var n=e.docId,r=e.comments,c=e.setComments,a=e.commentInput,i=(0,s.useState)(""),u=(0,m.Z)(i,2),l=u[0],d=u[1],x=(0,s.useContext)(f.Z),h=x.firebase,g=x.FieldValue,j=(0,s.useContext)(p.Z).user.displayName,Z=function(e){return e.preventDefault(),c([].concat((0,v.Z)(r),[{displayName:j,comment:l}])),d(""),h.firestore().collection("photos").doc(n).update({comments:g.arrayUnion({displayName:j,comment:l})})};return(0,o.jsxs)("form",{className:"post-add-comment",method:"POST",onSubmit:function(e){return l.length>=1?Z(e):e.preventDefault},children:[(0,o.jsx)("img",{src:t(358).Z,alt:""}),(0,o.jsx)("input",{type:"text",name:"add-comment",placeholder:"Add a comment...",autoComplete:"off",value:l,onChange:function(e){var n=e.target;return d(n.value)},ref:a}),(0,o.jsx)("button",{type:"button",disabled:l.length<1,onClick:Z,children:"Post"})]})},Z=function(e){var n=e.docId,t=e.comments,r=e.posted,c=e.commentInput,i=(0,s.useState)(t),u=(0,m.Z)(i,2),l=u[0],d=u[1],f=(0,s.useState)(3),p=(0,m.Z)(f,2),x=p[0],h=p[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"post-comments",children:[l.slice(0,x).map((function(e){return(0,o.jsxs)("p",{children:[(0,o.jsx)(a.rU,{to:"/".concat(e.displayName),children:(0,o.jsx)("span",{className:"post-comments-user",children:e.displayName})}),(0,o.jsx)("span",{children:e.comment})]},"".concat(e.comment,"-").concat(e.displayName))})),l.length>=3&&x<l.length&&(0,o.jsx)("p",{className:"comments-view-more",onClick:function(){h(x+3)},children:"View more comments"}),(0,o.jsxs)("p",{children:[(0,g.Z)(r,new Date)," ago"]})]}),(0,o.jsx)(j,{docId:n,comments:l,setComments:d,commentInput:c})]})},I=function(e){var n=e.content,t=(0,s.useRef)(null);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"post-container",children:[(0,o.jsx)(i,{username:n.username}),(0,o.jsx)(u,{src:n.imageSrc,caption:n.caption}),(0,o.jsx)(x,{docId:n.docId,totalLikes:n.likes.length,likedPhoto:n.userLikedPhoto,handleFocus:function(){return t.current.focus()}}),(0,o.jsx)(h,{caption:n.caption,username:n.username}),(0,o.jsx)(Z,{docId:n.docId,comments:n.comments,posted:n.dateCreated,commentInput:t})]})})},N=t(4973),b=function(e){var n=(0,s.useState)(null),t=(0,m.Z)(n,2),r=t[0],c=t[1];return(0,s.useEffect)((function(){var n=function(){var n=(0,d.Z)((0,l.Z)().mark((function n(){var t,s;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===e||void 0===e||null===(t=e.following)||void 0===t?void 0:t.length)>0)){n.next=6;break}return n.next=3,(0,N.wP)(e.userId,e.following);case 3:(s=n.sent).sort((function(e,n){return n.dateCreated-e.dateCreated})),c(s);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[null===e||void 0===e?void 0:e.userId,null===e||void 0===e?void 0:e.following]),{photos:r}},k=function(){var e=(0,s.useContext)(c).user,n=b(e).photos;return(0,o.jsx)("div",{className:"post-wrapper",children:n?n.map((function(e){return(0,o.jsx)(I,{content:e},e.docId)})):null})},w=t(1019),C=function(e){var n=e.username,t=e.fullName;return n&&t?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"user-suggestion-wrapper",children:(0,o.jsxs)("div",{className:"user-suggestion-container",children:[(0,o.jsx)(a.rU,{to:"/".concat(n),children:(0,o.jsx)("img",{src:"/images/avatars/".concat(n,".jpg"),className:"suggestions-main-user-icon",alt:n,onError:function(e){e.target.src=w.h}})}),(0,o.jsxs)("div",{className:"username-container",children:[(0,o.jsx)("h5",{children:n}),(0,o.jsx)("h5",{children:t})]})]})})}):(0,o.jsx)(o.Fragment,{})},y=(0,s.memo)(C),F=function(e){var n=e.profileDocId,t=e.username,r=e.profileId,c=e.userId,i=e.loggenInUserDocId,u=(0,s.useState)(!1),f=(0,m.Z)(u,2),p=f[0],x=f[1],h=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,(0,N.NS)(i,r,!1);case 3:return e.next=5,(0,N.T6)(n,c,!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?null:(0,o.jsxs)("div",{className:"user-suggestion-wrapper",children:[(0,o.jsxs)("div",{className:"user-suggestion-container",children:[(0,o.jsx)(a.rU,{to:"/".concat(t),children:(0,o.jsx)("img",{src:"images/avatars/".concat(t,".jpg"),className:"suggestions-icon",alt:t,onError:function(e){e.target.src=w.h}})}),(0,o.jsx)("div",{className:"username-container",children:(0,o.jsx)("h5",{children:t})})]}),(0,o.jsx)("div",{className:"user-suggestion-button",children:(0,o.jsx)("button",{type:"button",id:"follow-button",onClick:h,children:"Follow"})})]})},S=function(e){var n=e.userId,t=e.following,r=e.loggenInUserDocId,c=(0,s.useState)(null),a=(0,m.Z)(c,2),i=a[0],u=a[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){var s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.ve)(n,t);case 2:s=e.sent,u(s);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e()}),[n,t]),i?i.length>0?(0,o.jsx)(o.Fragment,{children:i.map((function(e){return(0,o.jsx)(F,{profileDocId:e.docId,username:e.username,profileId:e.userId,userId:n,loggenInUserDocId:r},e.docId)}))}):null:(0,o.jsx)(o.Fragment,{})},U=function(){var e=(0,s.useContext)(c).user,n=(e=void 0===e?{}:e).docId,t=void 0===n?"":n,r=e.fullName,a=e.username,i=e.userId,u=e.following;return(0,o.jsx)("section",{className:"suggestions-wrapper",children:(0,o.jsxs)("div",{className:"suggestions-container",children:[(0,o.jsx)(y,{username:a,fullName:r}),(0,o.jsx)(S,{userId:i,following:u,loggenInUserDocId:t})]})})},D=t(8592),P=function(e){var n=e.user,t=(0,D.Z)(n.uid),a=t.user,i=t.setActiveUser;return(0,s.useEffect)((function(){document.title="Instagram"}),[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(c.Provider,{value:{user:a,setActiveUser:i},children:[(0,o.jsx)(r.Z,{}),(0,o.jsxs)("div",{className:"dashboard-wrapper",children:[(0,o.jsx)(k,{}),(0,o.jsx)(U,{})]})]})})}}}]);
//# sourceMappingURL=71.e017dd67.chunk.js.map