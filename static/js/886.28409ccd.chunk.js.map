{"version":3,"file":"static/js/886.28409ccd.chunk.js","mappings":"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","sources":["Assets/Images/NavbarSvg.js","Components/Navbar.js","Constants/paths.js","Hooks/useUser.js","Services/firebase.js"],"sourcesContent":["const Home = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      color=\"#262626\"\r\n      fill=\"#262626\"\r\n      height=\"24\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n    >\r\n      <path\r\n        d=\"M9.005 16.545a2.997 2.997 0 012.997-2.997h0A2.997 2.997 0 0115 16.545V22h7V11.543L12 2 2 11.543V22h7.005z\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n};\r\n\r\n const DirectMessage = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      color=\"#262626\"\r\n      fill=\"#262626\"\r\n      height=\"24\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n    >\r\n      <line\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        x1=\"22\"\r\n        x2=\"9.218\"\r\n        y1=\"3\"\r\n        y2=\"10.083\"\r\n      ></line>\r\n      <polygon\r\n        fill=\"none\"\r\n        points=\"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334\"\r\n        stroke=\"currentColor\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n      ></polygon>\r\n    </svg>\r\n  );\r\n};\r\n\r\n const AddPost = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      color=\"#262626\"\r\n      fill=\"#262626\"\r\n      height=\"24\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n    >\r\n      <path\r\n        d=\"M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552z\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n      ></path>\r\n      <line\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        x1=\"6.545\"\r\n        x2=\"17.455\"\r\n        y1=\"12.001\"\r\n        y2=\"12.001\"\r\n      ></line>\r\n      <line\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        x1=\"12.003\"\r\n        x2=\"12.003\"\r\n        y1=\"6.545\"\r\n        y2=\"17.455\"\r\n      ></line>\r\n    </svg>\r\n  );\r\n};\r\n\r\n const Exploration = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      color=\"#262626\"\r\n      fill=\"#262626\"\r\n      height=\"24\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n    >\r\n      <polygon\r\n        fill=\"none\"\r\n        points=\"13.941 13.953 7.581 16.424 10.06 10.056 16.42 7.585 13.941 13.953\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n      ></polygon>\r\n      <polygon\r\n        fillRule=\"evenodd\"\r\n        points=\"10.06 10.056 13.949 13.945 7.581 16.424 10.06 10.056\"\r\n      ></polygon>\r\n      <circle\r\n        cx=\"12.001\"\r\n        cy=\"12.005\"\r\n        fill=\"none\"\r\n        r=\"10.5\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n      ></circle>\r\n    </svg>\r\n  );\r\n};\r\n\r\n const Flow = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      color=\"#262626\"\r\n      fill=\"#262626\"\r\n      height=\"24\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n    >\r\n      <path d=\"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z\"></path>\r\n    </svg>\r\n  );\r\n};\r\n\r\n const Search = (props) => {\r\n  return (\r\n    <svg\r\n      className={props.className}\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      color=\"#8e8e8e\"\r\n      fill=\"#8e8e8e\"\r\n      height=\"16\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"16\"\r\n    >\r\n      <path\r\n        d=\"M19 10.5A8.5 8.5 0 1110.5 2a8.5 8.5 0 018.5 8.5z\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n      ></path>\r\n      <line\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        x1=\"16.511\"\r\n        x2=\"22\"\r\n        y1=\"16.511\"\r\n        y2=\"22\"\r\n      ></line>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport { Home, AddPost, DirectMessage, Exploration, Flow, Search };\r\n","import { useContext } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport * as ROUTES from '../Constants/routes';\r\nimport FirebaseContext from \"../Context/firebase\";\r\nimport UserContext from \"../Context/user\";\r\nimport useUser from \"../Hooks/useUser\";\r\nimport { DEFAULT_IMAGE_PATH } from '../Constants/paths';\r\nimport * as SVG from \"../Assets/Images/NavbarSvg\";\r\nimport \"../Assets/Style/Navbar.css\";\r\n\r\nconst Navbar = () => {\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const { user: loggedInUser } = useContext(UserContext);\r\n  const { user } =useUser(loggedInUser?.uid)\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleSignOut = () => {\r\n    firebase.auth().signOut();\r\n    navigate(ROUTES.LOGIN);\r\n  }\r\n\r\n  return (\r\n    <header>\r\n      <nav>\r\n          <img src={require(\"../Assets/Images/logo.png\")} alt=\"instagram\" id=\"nav-logo\" onClick={() => navigate(ROUTES.DASHBOARD)} />\r\n          {loggedInUser ? ( \r\n          <>\r\n            <div className=\"input-wrapper\">\r\n              <input type=\"text\" name=\"search\" id=\"search\" placeholder=\"Search\" autoComplete=\"off\" required />\r\n              <SVG.Search className=\"search-icon\" />\r\n            </div>\r\n            <div className=\"icon-wrapper\">\r\n              <SVG.Home />\r\n              <SVG.DirectMessage />\r\n              <SVG.AddPost />\r\n              <SVG.Exploration />\r\n              <SVG.Flow />\r\n              {user.username && (\r\n                <Link to={`${ROUTES.DASHBOARD}${user.username}`}>\r\n                <img src={`${ROUTES.RELATIVE_PATH}/images/avatars/${user.username}.jpg`}\r\n                     alt={`${user.username} profile`} \r\n                     onError={(event) => {event.target.src = `${ROUTES.RELATIVE_PATH}${DEFAULT_IMAGE_PATH}`;}}\r\n                     className=\"icon-profile\"\r\n                     />\r\n              </Link>\r\n              )}\r\n              <button type=\"button\" onClick={handleSignOut}>Logout</button>\r\n            </div>\r\n          </>\r\n          ) : (\r\n          <>\r\n            <div className=\"input-wrapper\">\r\n              <input type=\"text\" name=\"search\" id=\"search\" placeholder=\"Search\" autoComplete=\"off\" required />\r\n              <SVG.Search className=\"search-icon\" />\r\n            </div>\r\n            <div className=\"button-wrapper\">\r\n            <Link to={ROUTES.LOGIN}><button className=\"btn-login\">Login</button></Link>\r\n            <Link to={ROUTES.SIGN_UP}><button className=\"btn-signup\">SignUp</button></Link>\r\n            </div>\r\n          </>\r\n          )}\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\nexport default Navbar;\r\n","export const DEFAULT_IMAGE_PATH = '/images/avatars/default.png';\n","import { useEffect, useState } from \"react\";\r\nimport { getUserByUserId } from \"../Services/firebase\";\r\n\r\nconst useUser = (userId) => {\r\n  const [activeUser, setActiveUser] = useState({});\r\n\r\n  useEffect(() => {\r\n    const getUserObjByUserId = async (userId) => {\r\n      const [user] = await getUserByUserId(userId);\r\n      setActiveUser(user || {});\r\n      // console.log(user)\r\n    };\r\n\r\n    if (userId) {\r\n      getUserObjByUserId(userId);\r\n    }\r\n  }, [userId]);\r\n  return { user: activeUser, setActiveUser };\r\n};\r\n\r\nexport default useUser;","import { FieldValue, firebase } from \"./firebase.config\";\r\n\r\nconst doesUsernameExist = async (username) => {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"username\", \"==\", username)\r\n    .get();\r\n\r\n  return result.docs.length > 0;\r\n};\r\n\r\nconst getUserByUserName = async (username) => {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"username\", \"==\", username)\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({ ...item.data(), docId: item.id }));\r\n};\r\n\r\nconst getUserByUserId = async (userId) => {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"userId\", \"==\", userId)\r\n    .get();\r\n\r\n  const user = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id,\r\n  }));\r\n\r\n  return user;\r\n};\r\n\r\nconst getSuggestedProfiles = async (userId, following) => {\r\n  const result = await firebase.firestore().collection(\"users\").limit(10).get();\r\n\r\n  return result.docs\r\n    .map((user) => ({ ...user.data(), docId: user.id }))\r\n    .filter(\r\n      (profile) =>\r\n        profile.userId !== userId && !following.includes(profile.userId)\r\n    );\r\n};\r\n\r\nconst updateLoggedInUserFollowing = (\r\n  loggenInUserDocId,\r\n  profileId,\r\n  isFollowingProfile\r\n) => {\r\n  return firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .doc(loggenInUserDocId)\r\n    .update({\r\n      following: isFollowingProfile\r\n        ? FieldValue.arrayRemove(profileId)\r\n        : FieldValue.arrayUnion(profileId),\r\n    });\r\n};\r\n\r\nconst updateFollowedUserFollowers = (\r\n  profileDocId,\r\n  loggenInUserDocId,\r\n  isFollowingProfile\r\n) => {\r\n  return firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .doc(profileDocId)\r\n    .update({\r\n      followers: isFollowingProfile\r\n        ? FieldValue.arrayRemove(loggenInUserDocId)\r\n        : FieldValue.arrayUnion(loggenInUserDocId),\r\n    });\r\n};\r\n\r\nconst getPhotos = async (userId, following) => {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"photos\")\r\n    .where(\"userId\", \"in\", following)\r\n    .get();\r\n\r\n  const userFollowedPhotos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id,\r\n  }));\r\n\r\n  const photosWithUserDetails = await Promise.all(\r\n    userFollowedPhotos.map(async (photo) => {\r\n      let userLikedPhoto = false;\r\n      if (photo.likes.includes(userId)) {\r\n        userLikedPhoto = true;\r\n      }\r\n      const user = await getUserByUserId(photo.userId);\r\n      const { username } = user[0];\r\n      return { username, ...photo, userLikedPhoto };\r\n    })\r\n  );\r\n  return photosWithUserDetails;\r\n};\r\n\r\nconst getUserPhotosByUsername = async (username) => {\r\n  const [user] = await getUserByUserName(username);\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"photos\")\r\n    .where(\"userId\", \"==\", user.userId)\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({ ...item.data(), docId: item.id }));\r\n};\r\n\r\nconst isUserFollowingProfile = async (loggedInUserUsername, profileUserId) => {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"username\", \"==\", loggedInUserUsername)\r\n    .where(\"following\", \"array-contains\", profileUserId)\r\n    .get();\r\n\r\n  const [response = {}] = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id,\r\n  }));\r\n\r\n  return response.userId;\r\n};\r\n\r\nconst toggleFollow = async (isFollowingProfile, activeUserDocId, profileDocId, profileUserId, followingUserId) => {\r\n  await updateLoggedInUserFollowing(activeUserDocId, profileUserId, isFollowingProfile);\r\n  await updateFollowedUserFollowers(profileDocId, followingUserId, isFollowingProfile);\r\n}\r\n\r\nexport {\r\n  doesUsernameExist,\r\n  getUserByUserName,\r\n  getUserByUserId,\r\n  getSuggestedProfiles,\r\n  updateLoggedInUserFollowing,\r\n  updateFollowedUserFollowers,\r\n  getPhotos,\r\n  getUserPhotosByUsername,\r\n  isUserFollowingProfile,\r\n  toggleFollow\r\n};\r\n"],"names":["Home","xmlns","color","fill","height","role","viewBox","width","d","stroke","strokeLinejoin","strokeWidth","DirectMessage","x1","x2","y1","y2","points","AddPost","strokeLinecap","Exploration","fillRule","cx","cy","r","Flow","Search","props","className","firebase","useContext","FirebaseContext","loggedInUser","UserContext","user","useUser","uid","navigate","useNavigate","src","require","alt","id","onClick","ROUTES","type","name","placeholder","autoComplete","required","username","to","onError","event","target","DEFAULT_IMAGE_PATH","auth","signOut","userId","useState","activeUser","setActiveUser","useEffect","getUserObjByUserId","getUserByUserId","doesUsernameExist","collection","where","get","result","docs","length","getUserByUserName","map","item","data","docId","getSuggestedProfiles","following","limit","filter","profile","includes","updateLoggedInUserFollowing","loggenInUserDocId","profileId","isFollowingProfile","doc","update","FieldValue","updateFollowedUserFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","photosWithUserDetails","getUserPhotosByUsername","isUserFollowingProfile","loggedInUserUsername","profileUserId","response","toggleFollow","activeUserDocId","followingUserId"],"sourceRoot":""}